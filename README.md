# euromillions-push-server

Push server to notify when Euromillion exceeds a certain amount (FR).
This project is configured to work with the french Euromillions coporation (fdj.fr).
Feel free to fork this repo and customize it for your country.

## Getting Started

Copy the `.env-sample` file to a `.env` file. Change the values according to your needs.

How to fill the file :

- PORT: Port exposed by your server
- PUBLIC_VAPID_KEY: Public key generated by webpush (see webpush)
- PRIVATE_VAPID_KEY: Private key generated by webpush (see webpush)
- MAIL_TO: mailto the owner of the VAPID key (see webpush)
- CRON_SCHEDULE: Periodicity of notifications (see node-schedule)
- PRIZE_THRESHOLD: Amount that trigger the notifications
- URL_FDJ: URL of the website to scrap the prize

## Prerequisite

- NodeJS

## Installation

```bash
npm install
```

## Test

The dev mode use the same `.env` file as production.
Create the `data` folder at the root of the project. This will hold the database `db.json`

```bash
npm run dev
```

## Run

Use the `.env` file.
Create the `data` folder at the root of the project. This will hold the database `db.json`

```bash
npm run start
```

You can also trigger manually the sent with the following command :

```bash
npm run send
```

## Docker

You can rewrite the environment inside the docker files when deploying to production.

```bash
docker-compose up -d
```

## Build With

- [body-parser](https://github.com/expressjs/body-parser) - Node.js body parsing middleware
- [cheerio](https://github.com/cheeriojs/cheerio) - Fast, flexible, and lean implementation of core jQuery designed specifically for the server.
- [compression](https://github.com/expressjs/compression) - Node.js compression middleware
- [dotenv](https://github.com/motdotla/dotenv) - Loads environment variables from .env for nodejs projects.
- [express](https://github.com/expressjs/express) - Fast, unopinionated, minimalist web framework for node.
- [lowdb](https://github.com/typicode/lowdb) - lowdb is a small local JSON database powered by Lodash
- [node-fetch](https://github.com/node-fetch/node-fetch) - A light-weight module that brings window.fetch to Node.js
- [node-schedule](https://github.com/node-schedule/node-schedule) - A cron-like and not-cron-like job scheduler for Node.
- [web-push](https://github.com/web-push-libs/web-push) - Web Push library for Node.js
- [nodemon](https://github.com/remy/nodemon) - Monitor for any changes in your node.js application and automatically restart the server - perfect for development

## Contributing

Pull requests are welcome. For major changes, please open an issue first to discuss what you would like to change.

## License

[MIT](https://choosealicense.com/licenses/mit/)
